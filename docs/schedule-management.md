# 図書委員当番割り当てシステム - スケジュール管理仕様書

## 概要

本ドキュメントは「図書委員当番割り当てシステム」のスケジュール管理機能について記述します。このシステムは小学校の図書委員の当番を管理するためのものであり、曜日単位での図書委員の割り当てと年2回の修正に対応しています。

## スケジュール管理の基本方針

1. **曜日単位の割り当て**
   - 日付単位ではなく、曜日（月〜金）単位で図書委員を割り当てる
   - 各曜日に図書室ごとの担当者を設定

2. **年2回の修正**
   - 前期（4月〜9月）と後期（10月〜3月）で別々のスケジュールを管理
   - 各学期ごとに曜日単位で図書委員を割り当てる

3. **図書室単位の割り当て**
   - 各図書室（図書室A、図書室Bなど）ごとに担当者を割り当てる
   - 各図書室に複数の担当者を設定可能

## データ構造

スケジュールは以下のデータ構造で管理されます：

```typescript
// スケジュールアイテムの型定義
type Member = { name: string; icon: string };
type Duty = { location: string; members: Member[] };
type ScheduleItem = {
  id: number;
  semester: string; // 前期・後期
  year: string;     // 年度
  day: string;      // 曜日（月、火、水、木、金）
  duties: Duty[];   // 図書室ごとの担当者情報
  approved: boolean; // 承認状態
};
```

## 画面構成

### 1. ダッシュボード画面

ダッシュボード画面では、現在の曜日に基づいて当日の当番と週間スケジュールを表示します。

**主な機能：**
- 現在の曜日に基づいて当日の当番を表示
- 週間スケジュール（月〜金）を表示（日付表示なし）
- 各担当者をアイコン付きで視覚的に表示

### 2. スケジュール生成画面

スケジュール生成画面では、年度と学期を指定してスケジュールを生成します。

**主な機能：**
- 年度選択（現在年度を中心に前後2年）
- 学期選択（前期：4月〜9月、後期：10月〜3月）
- スケジュール生成ボタン
- 生成結果の表示と検証画面へのリンク

### 3. スケジュール検証画面

スケジュール検証画面では、生成されたスケジュールを確認・編集・承認します。

**主な機能：**
- スケジュール一覧表示（年度・学期・曜日でソート）
- フィルタリング機能（全て、承認済み、未承認）
- 個別スケジュールの承認・非承認
- 担当者の編集（追加・削除・変更）
- 一括承認機能
- ダッシュボードでの確認リンク

## 編集機能

スケジュール検証画面では、以下の編集機能を提供します：

1. **担当者の追加**
   - 各図書室に担当者を追加可能
   - アイコンと名前を設定可能

2. **担当者の削除**
   - 不要な担当者を削除可能

3. **担当者情報の変更**
   - 名前の変更
   - アイコンの変更（複数のアイコンから選択可能）

4. **承認状態の変更**
   - 個別スケジュールの承認・非承認
   - 全スケジュールの一括承認

## アイコン一覧

担当者には以下のアイコンを設定可能です：

- 🌸 (桜)
- 🚀 (ロケット)
- 📚 (本)
- 🌺 (ハイビスカス)
- 🏃 (走る人)
- 🌼 (花)
- 🏆 (トロフィー)
- 📖 (開いた本)
- 🌻 (ひまわり)
- 🌊 (波)
- 🌷 (チューリップ)
- ✈️ (飛行機)

## 実装上の注意点

1. **曜日の扱い**
   - 曜日は「月」「火」「水」「木」「金」「土」「日」の文字列で管理
   - ソート順は月曜日から日曜日の順

2. **学期の扱い**
   - 学期は「前期」「後期」の文字列で管理
   - ソート順は「前期」→「後期」の順

3. **現在の曜日の取得**
   - 現在の曜日は `new Date().getDay()` で取得し、日本語の曜日に変換

4. **スケジュールの承認フロー**
   - スケジュール生成 → スケジュール検証 → 承認 → ダッシュボード表示

## 今後の拡張性

1. **祝日対応**
   - 祝日情報を取得して、祝日の当番を自動調整する機能

2. **担当者の自動割り当て**
   - 担当者の希望や制約を考慮した自動割り当てアルゴリズム

3. **通知機能**
   - 当番の前日や当日に担当者に通知する機能

4. **統計情報**
   - 担当回数や頻度などの統計情報を表示する機能

## 変更履歴

- 2025-05-22: 初版作成
  - 曜日単位の割り当てに対応
  - 年2回（前期・後期）の修正に対応
  - アイコン付き担当者表示の実装
