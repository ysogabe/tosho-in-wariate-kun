# ADR 0001: フロントエンド技術スタックの選定

## ステータス

承認済み (2025-05-22)

## コンテキスト

図書委員当番割り当てシステム（通称：当番割り当てくん）のフロントエンド開発において、以下の要件を満たす技術スタックを選定する必要がある：

1. 学校現場での使いやすさを重視した直感的なUI/UX
2. レスポンシブ対応（PC、タブレット両方での利用）
3. 開発効率の高さ（限られた時間内での実装）
4. 将来的な拡張性と保守性
5. モダンなWeb技術による高品質な実装

当初計画ではReact.js + TypeScript + Material-UIを採用予定だったが、最新のトレンドと技術的優位性を考慮し、再検討を行う。

## 決定

以下の技術スタックを採用する：

1. **Next.js**: React フレームワークとして
2. **React**: UIライブラリとして
3. **Tailwind CSS**: スタイリングフレームワークとして
4. **shadcn/ui**: UIコンポーネントライブラリとして

## 根拠

### Next.js

#### メリット

- **ハイブリッドレンダリング**: SSR (Server-Side Rendering)、SSG (Static Site Generation)、CSR (Client-Side Rendering)を状況に応じて選択可能
- **ファイルベースのルーティング**: 直感的なページ構造とルーティング
- **API Routes**: バックエンドAPIエンドポイントを同一プロジェクト内に実装可能
- **ビルトインの最適化**: 画像最適化、フォント最適化、スクリプト最適化など
- **App Router**: 最新のNext.js 13+では、よりモダンなReactパラダイム（React Server Components等）をサポート
- **開発エクスペリエンス**: Fast Refresh、エラー報告の改善など

#### デメリット

- **学習曲線**: 特にApp Routerの新概念は学習が必要
- **複雑性**: 一部の高度な機能は設定や理解が複雑

### React

#### メリット

- **コンポーネントベース**: 再利用可能なUIコンポーネントでの開発
- **仮想DOM**: 効率的なDOM更新による高いパフォーマンス
- **エコシステム**: 豊富なライブラリとコミュニティサポート
- **React Hooks**: 関数コンポーネントでの状態管理と副作用の扱いが容易

#### デメリット

- **学習曲線**: 初心者には概念理解に時間がかかる場合がある
- **過剰な選択肢**: ライブラリやアプローチが多すぎて選択に迷うことがある

### Tailwind CSS

#### メリット

- **ユーティリティファースト**: HTMLマークアップ内でスタイルを直接適用できる
- **カスタマイズ性**: テーマ設定でプロジェクト固有のデザイントークンを定義可能
- **生産性**: クラス名を考える時間を節約し、スタイリングが高速
- **最小限のCSS**: 使用するクラスのみがビルドに含まれる
- **レスポンシブデザイン**: ブレークポイントベースのクラス命名が直感的
- **ダークモード**: 容易にダークモードを実装可能

#### デメリット

- **HTMLの肥大化**: 多数のクラス名がHTMLを長くする
- **学習曲線**: 独自のクラス命名規則に慣れる必要がある
- **デザイナーとの協業**: デザイナーがTailwindに不慣れな場合、コミュニケーションコストが増加

### shadcn/ui

#### メリット

- **コピー&ペーストコンポーネント**: ライブラリではなく、実際のコードとして提供されるためカスタマイズが容易
- **Radix UIベース**: アクセシビリティを重視した堅牢なプリミティブコンポーネント
- **Tailwind CSSとの統合**: デザインシステムとスタイリングの一貫性
- **テーマカスタマイズ**: 容易なテーマ変更とブランディング適用
- **最小限の依存関係**: 必要なコンポーネントのみを使用可能
- **タイプセーフ**: TypeScriptでの型安全性

#### デメリット

- **非ライブラリアプローチ**: アップデート時に手動での更新が必要
- **コードベースサイズ**: 多くのコンポーネントを使用すると、プロジェクトサイズが増加
- **比較的新しい**: 長期的な安定性や成熟度はまだ証明されていない

## 影響

### ポジティブな影響

1. **開発速度の向上**: Tailwind CSSとshadcn/uiによる高速なUI実装
2. **一貫したUI/UX**: 整合性のあるデザインシステムの構築が容易
3. **パフォーマンスの向上**: Next.jsのレンダリング最適化によるユーザー体験の改善
4. **将来性**: モダンなReactパラダイムへの対応と長期的なサポート
5. **保守性**: 構造化されたコードベースと明確な責任分離

### ネガティブな影響

1. **学習コスト**: 新しい技術スタックへの習熟に時間が必要
2. **移行コスト**: 既存計画からの変更に伴う初期コスト
3. **複雑性の増加**: 特にNext.jsの高度な機能を活用する場合

## 代替案

1. **Vue.js + Nuxt.js**:
   - より直感的な学習曲線だが、Reactほどのエコシステムはない
   - 本プロジェクトではReactの広いエコシステムを活用したい

2. **React + Create React App + Material-UI**:
   - 当初の計画
   - Next.jsほどの最適化やSSR/SSGの恩恵を受けられない
   - Material-UIはカスタマイズが複雑になる傾向がある

3. **React + Chakra UI**:
   - アクセシビリティとカスタマイズ性に優れている
   - Tailwind CSSほどの自由度と生産性はない

## 実装詳細

### プロジェクト構成

```
tosho-in-wariate-kun/
├── client/
│   ├── src/
│   │   ├── app/              # Next.js App Router
│   │   ├── components/       # 共通コンポーネント
│   │   │   ├── ui/           # shadcn/ui コンポーネント
│   │   │   ├── common/       # 汎用コンポーネント
│   │   │   ├── layout/       # レイアウトコンポーネント
│   │   │   └── forms/        # フォームコンポーネント
│   │   ├── lib/              # ユーティリティ関数
│   │   ├── hooks/            # カスタムフック
│   │   ├── services/         # API通信
│   │   ├── types/            # 型定義
│   │   └── styles/           # グローバルスタイル
│   ├── public/               # 静的ファイル
│   ├── tailwind.config.js    # Tailwind設定
│   ├── next.config.js        # Next.js設定
│   └── package.json          # 依存関係
```

### 環境構築ステップ

1. Next.jsプロジェクトの作成

```bash
npx create-next-app@latest client --typescript --tailwind --eslint
```

2. shadcn/uiのセットアップ

```bash
npx shadcn-ui@latest init
```

3. 必要なコンポーネントのインストール

```bash
npx shadcn-ui@latest add button
npx shadcn-ui@latest add calendar
npx shadcn-ui@latest add form
# 他必要なコンポーネント
```

## 注意点

1. **パフォーマンスモニタリング**: Next.jsのアナリティクス機能を活用して継続的にパフォーマンスを監視する
2. **アクセシビリティ**: shadcn/uiのアクセシビリティ機能を最大限に活用し、学校現場での多様なユーザーに対応する
3. **レスポンシブデザイン**: Tailwindのブレークポイントを活用し、PC/タブレット両方での最適なUXを実現する
4. **段階的導入**: 特にNext.jsの高度な機能は段階的に導入し、チームの習熟度に合わせて活用する

## 参考資料

- [Next.js公式ドキュメント](https://nextjs.org/docs)
- [React公式ドキュメント](https://reactjs.org/docs/getting-started.html)
- [Tailwind CSS公式ドキュメント](https://tailwindcss.com/docs)
- [shadcn/ui公式ドキュメント](https://ui.shadcn.com)
