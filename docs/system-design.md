# 図書委員当番割り当てシステム - 概要設計書

## 1. システム概要

### 1.1 システム目的
小学校の図書委員の当番を効率的に管理し、曜日単位での割り当てと年2回の修正に対応したスケジュール管理システムを提供します。

### 1.2 対象ユーザー
- 小学校の教員（図書担当）
- 図書委員会の顧問教員
- 図書委員（閲覧のみ）

### 1.3 システム構成
- フロントエンド：Next.js + TypeScript + React
- スタイリング：Tailwind CSS
- データ管理：Context API + useState
- 将来的なバックエンド連携を想定した設計

## 2. 機能概要

### 2.1 基本機能
1. **ダッシュボード表示**
   - 現在の曜日に基づく当番表示
   - 週間スケジュール表示（月〜金）

2. **マスタデータ管理**
   - 学年管理
   - クラス管理
   - 図書委員管理
   - 図書室管理

3. **スケジュール管理**
   - スケジュールルール設定
   - スケジュール生成
   - スケジュール検証・編集
   - スケジュール承認

### 2.2 スケジュール管理の特徴
1. **曜日単位の割り当て**
   - 日付単位ではなく、曜日（月〜金）単位で図書委員を割り当て
   - 各曜日に図書室ごとの担当者を設定

2. **年2回の修正**
   - 前期（4月〜9月）と後期（10月〜3月）で別々のスケジュール
   - 各学期ごとに曜日単位で図書委員を割り当て

3. **視覚的な表現**
   - 担当者にアイコンを設定
   - 視覚的に分かりやすい表示

## 3. データモデル

### 3.1 主要エンティティ

#### 学年（Grade）
- id: 学年ID
- name: 学年名
- description: 説明

#### クラス（Class）
- id: クラスID
- name: クラス名
- gradeId: 学年ID
- capacity: 定員

#### 図書委員（CommitteeMember）
- id: 委員ID
- name: 委員名
- grade: 学年
- className: クラス名
- role: 役割（委員長、副委員長など）
- icon: アイコン

#### 図書室（Library）
- id: 図書室ID
- name: 図書室名
- capacity: 収容人数
- description: 説明

#### スケジュールルール（ScheduleRule）
- minDutyPerMonth: 月あたり最小当番回数
- maxDutyPerMonth: 月あたり最大当番回数

#### スケジュール（Schedule）
- id: スケジュールID
- semester: 学期（前期/後期）
- year: 年度
- day: 曜日
- duties: 図書室ごとの担当者情報
- approved: 承認状態

### 3.2 データフロー

1. **マスタデータ設定**
   - 学年・クラス・図書委員・図書室情報の登録
   - スケジュールルールの設定

2. **スケジュール生成**
   - 年度・学期を指定
   - スケジュールルールに基づき自動生成

3. **スケジュール検証**
   - 生成されたスケジュールの確認
   - 必要に応じて編集
   - 承認処理

4. **ダッシュボード表示**
   - 承認されたスケジュールを表示
   - 現在の曜日に基づいて当日の当番を表示

## 4. 非機能要件

### 4.1 ユーザビリティ
- 直感的で使いやすいインターフェース
- レスポンシブデザインによる様々なデバイスへの対応
- アクセシビリティへの配慮

### 4.2 パフォーマンス
- 高速な画面表示
- スムーズな操作感
- 効率的なデータ管理

### 4.3 セキュリティ
- 適切なアクセス制御
- データの整合性確保
- エラー処理の実装

### 4.4 拡張性
- 将来的な機能追加を考慮した設計
- コンポーネントの再利用性
- モジュール化された構造

## 5. 制約条件

### 5.1 技術的制約
- Next.js + TypeScriptによる実装
- Tailwind CSSによるスタイリング
- 現段階ではフロントエンドのみの実装

### 5.2 ビジネス制約
- 小学校の学期制度に合わせた設計
- 図書委員会の運営方針に沿った機能提供
- 教員の負担を軽減する使いやすさ

## 6. 将来的な拡張

### 6.1 バックエンド連携
- データベースとの連携
- ユーザー認証の実装
- API設計

### 6.2 追加機能
- 祝日対応
- 通知機能
- 統計情報の表示
- モバイルアプリ対応

### 6.3 インテグレーション
- 学校の他システムとの連携
- カレンダーアプリとの連携
- 保護者向け情報共有
