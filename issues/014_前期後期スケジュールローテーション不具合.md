# Issue #014: 前期・後期スケジュールのローテーション不具合

## 概要
スケジュール生成機能において、前期と後期で同じ委員割り当てが行われており、`docs/schedule_generator_design.md`で定義されているローテーションルールが適用されていない。

## 問題の詳細

### 現状
- 2025年度、2026年度、2027年度の前期・後期スケジュールを作成
- すべての年度で前期と後期の割り当てが完全に同一

### 期待される動作
`docs/schedule_generator_design.md`の要件に従い：
- 「前半、水曜日と金曜日の当番だった図書委員は、後半水曜日と金曜日の担当とならないようにする」
- つまり、前期に水曜・金曜担当だった委員は、後期には月曜・火曜・木曜のいずれかに配置される必要がある

### 実際のデータ例（2025年度）
```sql
-- 前期・後期ともに同じ割り当て
月曜日: 田中太郎、伊藤美香、山田次郎
火曜日: 鈴木美咲、渡辺大輔、田中太郎
水曜日: 佐藤花子、中村綾乃、鈴木美咲  -- 後期も同じ
木曜日: 高橋健太、佐藤花子
金曜日: 山田次郎、高橋健太  -- 後期も同じ
```

## 影響範囲
- `schedule_generator.py`のローテーションロジック
- すべての年度の後期スケジュール

## 原因の推測
1. `ScheduleGenerator`クラスで前期の割り当て情報を正しく参照していない
2. `load_committee_members`メソッドで水曜・金曜担当者の除外処理が機能していない
3. 後期スケジュール生成時に前期の情報が渡されていない

## 修正案

### 1. `schedule_generator.py`の修正
- 後期スケジュール生成時に前期の割り当て情報を正しく取得
- 水曜・金曜担当者の除外ロジックを確実に適用

### 2. データベースクエリの改善
- 前期スケジュールから水曜・金曜担当者を抽出するクエリの検証
- 除外処理が正しく動作することを確認

### 3. テストケースの追加
- 前期・後期でローテーションが正しく行われることを検証するテスト
- 水曜・金曜担当者が後期で除外されることを確認するテスト

## 優先度
高 - スケジュール生成の基本要件に関わる重要な不具合

## 関連ファイル
- `/mock_backend/schedule_generator.py`
- `/mock_backend/app.py` (generate_schedule エンドポイント)
- `/docs/schedule_generator_design.md`
- `/mock_backend/tests/test_schedule_generator.py`

## 再現手順
1. 任意の年度で前期スケジュールを生成
2. 同じ年度で後期スケジュールを生成
3. スケジュール検証画面で前期・後期の割り当てを比較
4. 水曜・金曜の担当者が同じであることを確認

## 作成日
2025-05-27

## ステータス
未対応